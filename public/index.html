<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/4.0.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/4.0.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/4.0.0/firebase-database.js"></script>
    <script defer src="/__/firebase/4.0.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/4.0.0/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
    <!-- A-Frame library -->
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>

  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="mars" src="http://media-channel.nationalgeographic.com/media/uploads/photos/content/video/2016/09/30/776630339726_Digimedia_Mars_Big%20Thinker_12_Space%20Cooties_SEQ_v10_DELIVERY.00_01_21_11.Still002.jpg">
        <img id="earth" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg">
      </a-assets>

      <a-sky id="image-360" radius="10" src="#mars"></a-sky>

    </a-scene>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
        // // The Firebase SDK is initialized and available here!
        const messaging = firebase.messaging();
        console.log('RUN MEEEEE')
        messaging.requestPermission()
        .then(function(){
          console.log('Have Permission');
          return messaging.getToken();
        })
        .then(function(token) {
          console.log(token);
        })
        .catch(function(err){
          console.log('Error occured');
        })
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('data', snapshot => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        //
        // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

        try {
          let app = firebase.app();
          let features = ['auth', 'database', 'messaging', 'storage'].filter(feature => typeof app[feature] === 'function');
          document.getElementsByTagName('body').innerHTML = `Firebase SDK loaded with ${features.join(', ')}`;
        } catch (e) {
          console.error(e);
          document.getElementsByTagName('body').innerHTML = 'Error loading the Firebase SDK, check the console.';
        }
      });

    </script>
    <script>
      function changeSky(location) {
        var sky = document.getElementById("image-360");
        sky.setAttribute('src', location);
      };
    </script>
  </body>
</html>
